# 计算机网络概述

## 网络分层结构

### 七层模型：OSI/RM开放互联模型（理论上的标准，实现的）

应用层：应用层的协议APP
表示层：将计算机能识别的二进制 转换成 人能识别的数据
会话层：分析数据的通信状态
传输层：进程和进程间的通信（端口信息）
网络层：主机与主机之间的通行（IP地址）
数据链路层：收发的完整的帧数据（在网络上独立传输）mac地址（设备地址）
物理层：不是物理设备，而是物理设备上的接口类型、电流强弱

### 四层协议：TCP/IP协议层

应用层：应用层的协议 FTP、Telnet、HTTP
传输层（运输层）：进程和进程间的通信（端口信息）TCP、UDP
网络层：主机与主机之间的通行（IP地址）IP、ICMP
链路层：收发的完整的帧数据（在网络上独立传输）mac地址（设备地址）ARP RARP

![image-20210107235436362](https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210107235436362.png)

![image-20210108131350452](https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108131350452.png)

- **IP协议 网际协议（网络层）**

在一个相互连接的网络系统上从**源地址到目的地传输数据包**（互联网数据包）**所提供必要功**
**能的协议**
尽量将数据从源地址 发送 目的地
特点：
**不可靠**：它不能保证IP数据包能成功地到达它的目的地，仅提供尽力而为的传输服务
**无连接**：IP并不维护任何关于后续数据包的状态信息。每个数据包的处理是相互独立
的。IP数据包可以不按发送顺序接收
**IP数据包中含有发送它主机的IP地址（源地址）和接收它主机的IP地址（目的地址）**

- **TCP是一种面向连接的,可靠的传输层通信协议**

**功能**：
提供不同主机上的**进程间通信**
**特点**

1. 建立链接->使用链接->释放链接（虚电路）
2. TCP数据包中包含序号和确认序号
3. 对包进行排序并检错，而损坏的包可以被重传

**服务对象**UDP协议 用户数据报协议 （传输层）

需要高度可靠性且面向连接的服务
如HTTP、FTP、SMTP等
**总结**：TCP **面向链接** 可靠 排序 检错 失败重传 不支持广播

- **UDP协议 用户数据报协议 （传输层）**

UDP是一种**面向无连接**的传输层通信协议

**功能**：
提供不同主机上的**进程间通信**
特点

1. 发送数据之前不需要建立链接
2. 不对数据包的顺序进行检查
3. 没有错误检测和重传机制

服务对象
   主要用于“查询—应答”的服务
   如：NFS、NTP、DNS等
   总结：UDP **无连接** 不排序 不检错 不重传 快 支持广播

## 地址介绍

- **mac地址（链路层） 设备和设备的通信**

MAC地址,用于标识网络设备,类似于身份证号，且理论上全球唯一。
组成：以太网内的MAC地址是一个48bit的值

<img src="https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108195656267.png" style="zoom:150%;" />

- **IP地址IPv4 （网络层） 主机 和 主机 32位**

ip地址组成:使用32bit,由{网络ID，主机ID}两部分组成
子网ID:IP地址中由子网掩码中1覆盖的连续位
主机ID:IP地址中由子网掩码中0覆盖的连续位

![image-20210108143050377](https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108143050377.png)

IP和子网掩码一起使用：

192.168.0.111/255.255.255.0 == 192.168.0.111/24
192.168.0.111/255.255.0.0 == 192.168.0.111/16
192.168.0.111/255.0.0.0 == 192.168.0.111/8

**ip地址特点**:不同网段 不能直接通信

子网ID不同的网络不能直接通信，如果要通信则需要路由器转发
主机ID全为0的IP地址 表示 网段地址。
主机ID全为1的IP地址 表示该 网段的广播地址。

案例：192.168.0.111/255.255.255.0 问当前IP所处网段地址 __192.168.0.0__ 以及 广播
地址 __192.168.0.255__

注意：任何一个网段中的网段地址和广播地址 都不能分配主机
192.168.0.1~192.168.0.254 == 可用的IP数量 只有254个
案例：192.168.0.111/255.255.0.0 问当前IP所处网段地址_192.168.0.0_ 以及 广播地
址_192.168.255.255_可用的主机数1~65534 == 可用的IP数量 只有65534个

- **IP地址分类（更加合理的利用IP地址）**

A类地址：默认8bit子网ID,第一位为0 广域网（国家‐国家，大城市‐大城市）
0xxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx/255.0.0.0
B类地址：默认16bit子网ID,前两位为10 城域网（城市‐城市）
10xx xxxx xxxx xxxx xxxx xxxx xxxx xxxx/255.255.0.0
C类地址：默认24bit子网ID,前三位为110
110x xxxx xxxx xxxx xxxx xxxx xxxx xxxx/255.255.255.0 局域网
D类地址：前四位为1110,多播地址
E类地址: 前五位为11110,保留为今后使用

A,B,C三类地址是最常用的

公有IP（可直接连接Internet）
经由InterNIC所统一规划的IP
私有IP（不可直接连接Internet ）
主要用于局域网络内的主机联机规划

![image-20210108202556176](https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108202556176.png)

**回环地址**

<img src="https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108203054234.png" alt="image-20210108203054234" style="zoom:150%;" />

功能
主要是测试本机的网络配置，能ping通127.0.0.1说
明本机的网卡和IP协议安装都没有问题
注意
127.0.0.1~127.255.255.254中的任何地址都将回环到本地主机中
不属于任何一个有类别地址类,它代表设备的本地虚拟接口
设置LinuxIP sudo ifconfig eth0 192.168.0.222 netmask 255.255.255.0

**子网掩码**（subnet mask）又叫网络掩码、地址掩码是一个32bit由1和0组成的数值，并且1
和0分别连续。
特点
必须结合IP地址一起使用，不能单独存在
IP地址中由子网掩码中1覆盖的连续位为子网ID,其余为主机ID

**端口号**：类似pid标识一个进程；在网络程序中，用端口号（port）来标识一个运行的网络程序

![image-20210108203342082](https://raw.githubusercontent.com/Malaaaa/cloudimage/master/image-20210108203342082.png)

**特点**
1、端口号是无符号短整型的类型
2、每个端口都拥有一个端口号
3、TCP、UDP维护各自独立的端口号
4、网络应用程序,至少要占用一个端口号,也可以占有多个端口号

- 端口的分类

**知名端口**（1~1023）
由互联网数字分配机构(IANA)根据用户需要进行统一分配
例如：FTP—21，HTTP—80等
服务器通常使用的范围;若强制使用,须加root特权
**动态端口**（1024~65535）
应用程序通常使用的范围
注意
端口号类似于进程号，同一时刻只能标志一个进程
可以重复使用